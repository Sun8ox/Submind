(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{2164:(e,i,o)=>{Promise.resolve().then(o.bind(o,7259))},7259:(e,i,o)=>{"use strict";o.r(i),o.d(i,{default:()=>a});var t=o(5155),n=o(2115);function a(){let[e,i]=(0,n.useState)(""),[o,a]=(0,n.useState)(""),[s,r]=(0,n.useState)(null),[l,d]=(0,n.useState)("Basic"),[u,c]=(0,n.useState)("Public"),[g,p]=(0,n.useState)(""),[f,h]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),v=["video/mp4","video/webm","video/ogg"],b=async t=>{if(t.preventDefault(),p(""),h(""),!e||!s)return void p("Please provide a video name and select a file.");if(!v.includes(s.type))return void p("Invalid file type. Only mp4, webm, and ogg are allowed.");if(s.size>0x140000000)return void p("File is too large. Max size is 1GB.");x(!0);let n=await fetch("/api/videos/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:o,fileSize:s.size,contentType:s.type,subscription:l,publicity:u})}),g=await n.json();if(!g.success){p(g.message||"Failed to get upload URL."),x(!1);return}if(!(await fetch(g.presignedUrl,{method:"PUT",headers:{"Content-Type":s.type},body:s})).ok){p("Failed to upload video file."),x(!1);return}h("Video uploaded successfully!"),i(""),a(""),r(null),d("Basic"),c("Public"),x(!1)};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsxs)("div",{className:"bg-white/90 shadow-xl rounded-2xl p-8 w-full max-w-lg",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-center text-indigo-800 mb-6",children:"Upload a Video"}),(0,t.jsxs)("form",{onSubmit:b,className:"flex flex-col gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Video Name",className:"p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400",value:e,onChange:e=>i(e.target.value),maxLength:100,required:!0}),(0,t.jsx)("textarea",{placeholder:"Description (optional)",className:"p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400",value:o,onChange:e=>a(e.target.value),maxLength:500,rows:3}),(0,t.jsxs)("select",{className:"p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400",value:l,onChange:e=>d(e.target.value),children:[(0,t.jsx)("option",{value:"Basic",children:"Basic"}),(0,t.jsx)("option",{value:"Premium",children:"Premium"}),(0,t.jsx)("option",{value:"Free",children:"Free"})]}),(0,t.jsxs)("select",{className:"p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400",value:u,onChange:e=>c(e.target.value),children:[(0,t.jsx)("option",{value:"Public",children:"Public"}),(0,t.jsx)("option",{value:"Private",children:"Private"}),(0,t.jsx)("option",{value:"Uncategorized",children:"Uncategorized"})]}),(0,t.jsx)("input",{type:"file",accept:v.join(","),className:"p-4 bg-gray-200 rounded-lg border border-gray-300 focus:outline-none focus:ring-1",onChange:e=>r(e.target.files[0]),required:!0}),g&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:g}),f&&(0,t.jsx)("div",{className:"text-green-600 text-sm",children:f}),(0,t.jsx)("button",{type:"submit",className:"bg-indigo-700 hover:bg-indigo-800 text-white font-semibold rounded-lg p-3 transition-colors",disabled:m,children:m?"Uploading...":"Upload Video"})]})]})})}}},e=>{var i=i=>e(e.s=i);e.O(0,[441,684,358],()=>i(2164)),_N_E=e.O()}]);